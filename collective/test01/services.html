<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Book a Session — COLECTIVO</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg: #0a0a0a;
  --bg2: #111110;
  --fg: #f0ede8;
  --accent: #c8b89a;
  --accent2: #a89070;
  --green: #6abf8a;
  --red: #d4442a;
  --yellow: #d4a26a;
  --muted: #6b6560;
  --card-bg: #161514;
  --border: rgba(240, 237, 232, 0.1);
  --serif: 'Instrument Serif', Georgia, serif;
  --sans: 'DM Sans', system-ui, sans-serif;
}

html { font-size: 100%; scroll-behavior: smooth; }

body {
  background: var(--bg);
  color: var(--fg);
  font-family: var(--sans);
  line-height: 1.6;
  overflow-x: hidden;
}

/* NAV */
nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: clamp(1rem, 2vw, 1.5rem) clamp(1.5rem, 5vw, 4rem);
  background: rgba(10, 10, 10, 0.85);
  backdrop-filter: blur(1.5rem);
  border-bottom: 0.0625rem solid var(--border);
}

.nav-logo {
  font-family: var(--serif);
  font-size: clamp(1.25rem, 2.5vw, 1.75rem);
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--fg);
  text-decoration: none;
}

.nav-links { display: flex; gap: clamp(1.25rem, 3vw, 2.5rem); list-style: none; }
.nav-links a {
  color: var(--muted);
  text-decoration: none;
  font-size: clamp(0.75rem, 1.2vw, 0.9rem);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  transition: color 0.3s;
  font-weight: 500;
}
.nav-links a:hover { color: var(--fg); }

.nav-burger {
  display: none;
  flex-direction: column;
  gap: 0.35rem;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
}
.nav-burger span { display: block; width: 1.5rem; height: 0.1rem; background: var(--fg); transition: transform 0.3s, opacity 0.3s; }
.nav-burger.active span:nth-child(1) { transform: translateY(0.45rem) rotate(45deg); }
.nav-burger.active span:nth-child(2) { opacity: 0; }
.nav-burger.active span:nth-child(3) { transform: translateY(-0.45rem) rotate(-45deg); }

.mobile-menu {
  display: none; position: fixed; inset: 0; z-index: 99;
  background: rgba(10,10,10,0.97);
  flex-direction: column; align-items: center; justify-content: center; gap: 2rem;
}
.mobile-menu.active { display: flex; }
.mobile-menu a { color: var(--fg); text-decoration: none; font-family: var(--serif); font-size: clamp(2rem, 6vw, 3.5rem); }

@media (max-width: 48em) {
  .nav-links { display: none; }
  .nav-burger { display: flex; }
}

/* HERO */
.hero {
  padding: clamp(8rem, 14vw, 12rem) clamp(1.5rem, 5vw, 4rem) clamp(3rem, 6vw, 4rem);
  text-align: center;
}

.hero h1 {
  font-family: var(--serif);
  font-size: clamp(2.5rem, 8vw, 6rem);
  line-height: 1;
  font-weight: 400;
  margin-bottom: 0.5em;
}

.hero h1 em { font-style: italic; color: var(--accent); }

.hero p {
  color: var(--muted);
  font-size: clamp(0.85rem, 1.4vw, 1rem);
  max-width: 35em;
  margin: 0 auto;
  line-height: 1.7;
}

/* INSTRUCTIONS */
.instructions {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: clamp(1.5rem, 3vw, 2.5rem);
  padding: 0 clamp(1.5rem, 5vw, 4rem) clamp(3rem, 6vw, 4rem);
}

.instruction {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: clamp(0.7rem, 1vw, 0.8rem);
  color: var(--muted);
}

.instruction-num {
  width: 2rem;
  height: 2rem;
  border-radius: 50%;
  border: 0.0625rem solid var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  color: var(--accent);
  flex-shrink: 0;
}

/* MAIN LAYOUT */
.booking-layout {
  display: grid;
  grid-template-columns: 1fr clamp(18rem, 30vw, 24rem);
  gap: clamp(1.5rem, 3vw, 2rem);
  padding: 0 clamp(1.5rem, 5vw, 4rem) clamp(4rem, 8vw, 6rem);
  align-items: start;
}

@media (max-width: 60em) {
  .booking-layout {
    grid-template-columns: 1fr;
  }
}

/* LEFT: SERVICES & CREW */
.panel { margin-bottom: clamp(2rem, 4vw, 3rem); }

.panel-label {
  font-size: clamp(0.6rem, 0.9vw, 0.7rem);
  letter-spacing: 0.25em;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: clamp(1rem, 2vw, 1.5rem);
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.panel-label::after {
  content: '';
  flex: 1;
  height: 0.0625rem;
  background: var(--border);
}

/* SERVICE CARDS */
.services-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(14rem, 100%), 1fr));
  gap: clamp(0.75rem, 1.5vw, 1rem);
}

.service-card {
  background: var(--card-bg);
  border: 0.0625rem solid var(--border);
  border-radius: 0.5rem;
  padding: clamp(1rem, 2vw, 1.5rem);
  cursor: grab;
  user-select: none;
  -webkit-user-select: none;
  transition: border-color 0.3s, transform 0.3s, box-shadow 0.3s;
  position: relative;
  overflow: hidden;
}

.service-card:active { cursor: grabbing; }

.service-card:hover {
  border-color: var(--accent);
  transform: translateY(-0.15rem);
  box-shadow: 0 0.5rem 1.5rem rgba(0,0,0,0.2);
}

.service-card.dragging {
  opacity: 0.4;
  transform: scale(0.95);
}

.service-card.selected {
  border-color: var(--accent);
  background: rgba(200, 184, 154, 0.06);
}

.service-card-photo {
  width: 100%;
  aspect-ratio: 16/9;
  background: linear-gradient(135deg, #1a1816, #2a2520);
  border-radius: 0.35rem;
  margin-bottom: clamp(0.75rem, 1.5vw, 1rem);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  font-size: 0.65rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  overflow: hidden;
}

.service-card-icon {
  font-size: clamp(1.2rem, 2vw, 1.5rem);
  margin-bottom: 0.35rem;
}

.service-card h3 {
  font-family: var(--serif);
  font-size: clamp(1.1rem, 2vw, 1.35rem);
  margin-bottom: 0.25rem;
}

.service-card p {
  font-size: clamp(0.7rem, 1vw, 0.8rem);
  color: var(--muted);
  line-height: 1.6;
  margin-bottom: 0.75rem;
}

.service-card-price {
  font-size: clamp(0.75rem, 1.1vw, 0.85rem);
  color: var(--accent);
  font-weight: 500;
}

.service-crew-dots {
  display: flex;
  gap: 0.35rem;
  margin-top: 0.75rem;
}

.crew-dot {
  width: 1.75rem;
  height: 1.75rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.5rem;
  font-weight: 700;
  letter-spacing: 0;
  text-transform: uppercase;
  border: 0.0625rem solid var(--border);
  transition: border-color 0.3s, background 0.3s, transform 0.3s;
}

.crew-dot.marco { background: rgba(212, 68, 42, 0.15); color: #d4442a; }
.crew-dot.luna { background: rgba(196, 113, 59, 0.15); color: #c4713b; }

.crew-dot.highlight {
  transform: scale(1.2);
  border-color: var(--accent);
  box-shadow: 0 0 0.5rem rgba(200, 184, 154, 0.3);
}

/* CREW CARDS */
.crew-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(14rem, 100%), 1fr));
  gap: clamp(0.75rem, 1.5vw, 1rem);
}

.crew-card {
  background: var(--card-bg);
  border: 0.0625rem solid var(--border);
  border-radius: 0.5rem;
  padding: clamp(1rem, 2vw, 1.5rem);
  cursor: grab;
  user-select: none;
  -webkit-user-select: none;
  transition: border-color 0.3s, transform 0.3s;
  display: flex;
  gap: clamp(0.75rem, 1.5vw, 1rem);
  align-items: center;
}

.crew-card:active { cursor: grabbing; }
.crew-card:hover { border-color: var(--accent); transform: translateY(-0.15rem); }
.crew-card.dragging { opacity: 0.4; transform: scale(0.95); }
.crew-card.selected { border-color: var(--accent); background: rgba(200, 184, 154, 0.06); }

.crew-card.highlight-marco { border-color: #d4442a; box-shadow: 0 0 1rem rgba(212, 68, 42, 0.15); }
.crew-card.highlight-luna { border-color: #c4713b; box-shadow: 0 0 1rem rgba(196, 113, 59, 0.15); }

.crew-avatar {
  width: clamp(3rem, 5vw, 4rem);
  height: clamp(3rem, 5vw, 4rem);
  border-radius: 50%;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--serif);
  font-size: clamp(1rem, 1.5vw, 1.2rem);
}

.crew-avatar.marco { background: rgba(212, 68, 42, 0.15); color: #d4442a; }
.crew-avatar.luna { background: rgba(196, 113, 59, 0.15); color: #c4713b; }

.crew-info h3 {
  font-family: var(--serif);
  font-size: clamp(1rem, 1.6vw, 1.15rem);
  margin-bottom: 0.15rem;
}

.crew-info p {
  font-size: clamp(0.65rem, 0.9vw, 0.75rem);
  color: var(--muted);
}

.crew-services-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
  margin-top: 0.35rem;
}

.crew-tag {
  font-size: clamp(0.5rem, 0.7vw, 0.6rem);
  padding: 0.2em 0.5em;
  background: rgba(200, 184, 154, 0.08);
  border-radius: 0.25rem;
  color: var(--accent2);
  letter-spacing: 0.05em;
}

/* RIGHT: BOOKING ZONE */
.booking-zone {
  position: sticky;
  top: 5rem;
  background: var(--card-bg);
  border: 0.125rem dashed var(--border);
  border-radius: 0.75rem;
  padding: clamp(1.25rem, 2.5vw, 1.75rem);
  transition: border-color 0.3s, background 0.3s;
}

.booking-zone.drag-over {
  border-color: var(--accent);
  background: rgba(200, 184, 154, 0.04);
}

.bz-title {
  font-family: var(--serif);
  font-size: clamp(1.2rem, 2vw, 1.4rem);
  margin-bottom: 0.25rem;
}

.bz-sub {
  font-size: clamp(0.65rem, 0.9vw, 0.75rem);
  color: var(--muted);
  margin-bottom: clamp(1rem, 2vw, 1.5rem);
}

.bz-section {
  margin-bottom: clamp(1rem, 2vw, 1.25rem);
}

.bz-label {
  font-size: clamp(0.55rem, 0.8vw, 0.65rem);
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 0.5rem;
}

.bz-empty {
  font-size: clamp(0.65rem, 0.9vw, 0.75rem);
  color: var(--muted);
  font-style: italic;
  padding: clamp(0.75rem, 1.5vw, 1rem);
  border: 0.0625rem dashed var(--border);
  border-radius: 0.35rem;
  text-align: center;
}

.bz-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 0.0625rem solid var(--border);
  animation: fadeIn 0.3s ease;
  font-size: clamp(0.7rem, 1vw, 0.8rem);
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(0.25rem); }
  to { opacity: 1; transform: translateY(0); }
}

.bz-item-remove {
  background: none;
  border: none;
  color: var(--red);
  cursor: pointer;
  font-size: 0.75rem;
  padding: 0.2em;
}

/* TIME SLOTS */
.time-slots {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(5rem, 1fr));
  gap: 0.35rem;
}

.time-slot {
  padding: clamp(0.4rem, 0.8vw, 0.5rem);
  border: 0.0625rem solid var(--border);
  border-radius: 0.25rem;
  text-align: center;
  font-size: clamp(0.6rem, 0.85vw, 0.7rem);
  cursor: pointer;
  transition: border-color 0.3s, background 0.3s, color 0.3s;
}

.time-slot.available {
  border-color: rgba(106, 191, 138, 0.3);
  color: var(--green);
}

.time-slot.available:hover {
  background: rgba(106, 191, 138, 0.1);
  border-color: var(--green);
}

.time-slot.partial {
  border-color: rgba(212, 162, 106, 0.3);
  color: var(--yellow);
}

.time-slot.partial:hover {
  background: rgba(212, 162, 106, 0.08);
}

.time-slot.unavailable {
  color: var(--muted);
  opacity: 0.35;
  cursor: not-allowed;
  text-decoration: line-through;
}

.time-slot.selected {
  background: var(--accent);
  color: var(--bg);
  border-color: var(--accent);
  font-weight: 700;
}

.time-slot-crew {
  display: flex;
  justify-content: center;
  gap: 0.15rem;
  margin-top: 0.2rem;
}

.time-slot-crew .mini-dot {
  width: 0.4rem;
  height: 0.4rem;
  border-radius: 50%;
}

.mini-dot.marco-dot { background: #d4442a; }
.mini-dot.luna-dot { background: #c4713b; }

/* DATE PICKER */
.date-row {
  display: flex;
  gap: 0.35rem;
  overflow-x: auto;
  padding-bottom: 0.5rem;
  margin-bottom: 0.75rem;
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

.date-chip {
  flex-shrink: 0;
  padding: clamp(0.4rem, 0.8vw, 0.5rem) clamp(0.6rem, 1.2vw, 0.8rem);
  border: 0.0625rem solid var(--border);
  border-radius: 0.35rem;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  font-size: clamp(0.6rem, 0.85vw, 0.7rem);
}

.date-chip:hover { border-color: var(--accent); }

.date-chip.selected {
  background: var(--accent);
  color: var(--bg);
  border-color: var(--accent);
}

.date-chip-day {
  font-weight: 700;
  font-size: 1.1em;
}

.date-chip-label {
  font-size: 0.8em;
  color: var(--muted);
}

.date-chip.selected .date-chip-label { color: var(--bg); opacity: 0.7; }

/* BOOKING SUMMARY */
.bz-summary {
  margin-top: clamp(1rem, 2vw, 1.5rem);
  padding-top: clamp(1rem, 2vw, 1.5rem);
  border-top: 0.0625rem solid var(--border);
}

.bz-total {
  display: flex;
  justify-content: space-between;
  font-size: clamp(0.85rem, 1.2vw, 1rem);
  font-weight: 500;
  margin-bottom: 0.75rem;
}

.bz-total .price { color: var(--accent); font-weight: 700; }

.btn-book {
  width: 100%;
  padding: clamp(0.75rem, 1.5vw, 1rem);
  background: var(--accent);
  color: var(--bg);
  border: none;
  font-family: var(--sans);
  font-size: clamp(0.7rem, 1vw, 0.8rem);
  font-weight: 700;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  cursor: pointer;
  border-radius: 0.25rem;
  transition: opacity 0.3s;
}

.btn-book:hover { opacity: 0.85; }
.btn-book:disabled { opacity: 0.3; cursor: not-allowed; }

/* AVAILABILITY LEGEND */
.legend {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  margin-top: 0.75rem;
  font-size: clamp(0.55rem, 0.8vw, 0.6rem);
  color: var(--muted);
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 0.3rem;
}

.legend-dot {
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 50%;
}

.legend-dot.green { background: var(--green); }
.legend-dot.yellow { background: var(--yellow); }
.legend-dot.grey { background: var(--muted); opacity: 0.4; }

/* GALLERY */
.gallery-section {
  padding: clamp(4rem, 8vw, 6rem) clamp(1.5rem, 5vw, 4rem);
}

.gallery-section .panel-label { margin-bottom: clamp(1.5rem, 3vw, 2rem); }

.gallery-masonry {
  columns: 3;
  column-gap: clamp(0.75rem, 1.5vw, 1rem);
}

@media (max-width: 48em) {
  .gallery-masonry { columns: 2; }
}

.gallery-photo {
  break-inside: avoid;
  margin-bottom: clamp(0.75rem, 1.5vw, 1rem);
  border-radius: 0.35rem;
  overflow: hidden;
  position: relative;
}

.gallery-photo-img {
  width: 100%;
  background: linear-gradient(135deg, #1a1816, #2a2520);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  font-size: 0.65rem;
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.gallery-photo-img.tall { aspect-ratio: 3/4; }
.gallery-photo-img.wide { aspect-ratio: 4/3; }
.gallery-photo-img.square { aspect-ratio: 1/1; }

.gallery-tag {
  position: absolute;
  bottom: 0.5rem;
  left: 0.5rem;
  font-size: 0.55rem;
  padding: 0.25em 0.6em;
  background: rgba(10, 10, 10, 0.75);
  border-radius: 0.25rem;
  backdrop-filter: blur(0.5rem);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

/* FOOTER */
footer {
  border-top: 0.0625rem solid var(--border);
  padding: clamp(2rem, 4vw, 3rem) clamp(1.5rem, 5vw, 4rem);
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 1rem;
}

footer span { font-size: 0.75rem; color: var(--muted); }
.footer-links { display: flex; gap: 1.5rem; list-style: none; }
.footer-links a { font-size: 0.75rem; color: var(--muted); text-decoration: none; transition: color 0.3s; }
.footer-links a:hover { color: var(--fg); }

/* REVEAL */
.reveal { opacity: 0; transform: translateY(1.5rem); transition: opacity 0.8s ease, transform 0.8s ease; }
.reveal.visible { opacity: 1; transform: translateY(0); }

/* TOUCH GHOST */
.touch-ghost {
  position: fixed; z-index: 200; pointer-events: none;
  opacity: 0.85; transform: scale(0.65);
  background: var(--card-bg);
  border: 0.125rem solid var(--accent);
  border-radius: 0.35rem;
  padding: 0.5rem 0.75rem;
  font-size: 0.7rem;
  color: var(--fg);
  white-space: nowrap;
  box-shadow: 0 0.5rem 2rem rgba(0,0,0,0.5);
}

/* Mobile booking zone */
@media (max-width: 60em) {
  .booking-zone {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    border-radius: 1rem 1rem 0 0;
    z-index: 50;
    max-height: 70vh;
    overflow-y: auto;
    transform: translateY(calc(100% - 3.5rem));
    transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    border: 0.0625rem solid var(--border);
    border-bottom: none;
  }

  .booking-zone.expanded {
    transform: translateY(0);
  }

  .bz-pull-bar {
    display: flex;
    justify-content: center;
    padding: 0.5rem 0;
    cursor: pointer;
  }

  .bz-pull-bar::after {
    content: '';
    width: 2rem;
    height: 0.2rem;
    background: var(--muted);
    border-radius: 0.1rem;
  }
}

@media (min-width: 60.0625em) {
  .bz-pull-bar { display: none; }
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <a href="index.html" class="nav-logo">Colectivo</a>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="artist-marco.html">Marco</a></li>
    <li><a href="artist-luna.html">Luna</a></li>
    <li><a href="store.html">Store</a></li>
  </ul>
  <button class="nav-burger" aria-label="Menu">
    <span></span><span></span><span></span>
  </button>
</nav>

<div class="mobile-menu">
  <a href="index.html">Home</a>
  <a href="artist-marco.html">Marco</a>
  <a href="artist-luna.html">Luna</a>
  <a href="store.html">Store</a>
</div>

<!-- HERO -->
<section class="hero">
  <h1>Book <em>us.</em></h1>
  <p>Drag a service or crew member into the booking zone. Pick a date and time. We'll take care of the rest.</p>
</section>

<!-- HOW IT WORKS -->
<div class="instructions reveal">
  <div class="instruction">
    <span class="instruction-num">1</span>
    <span>Drag a service or crew member to the booking zone</span>
  </div>
  <div class="instruction">
    <span class="instruction-num">2</span>
    <span>Choose a date and available time</span>
  </div>
  <div class="instruction">
    <span class="instruction-num">3</span>
    <span>Submit your booking request</span>
  </div>
</div>

<!-- MAIN BOOKING LAYOUT -->
<div class="booking-layout">

  <!-- LEFT: SERVICES & CREW -->
  <div class="left-panel">

    <!-- SERVICES -->
    <div class="panel reveal">
      <div class="panel-label">Our Services</div>
      <div class="services-grid">

        <div class="service-card" draggable="true" data-type="service" data-id="photography" data-name="Photography Session" data-price="150" data-crew="marco,luna">
          <div class="service-card-photo">Photography sample</div>
          <div class="service-card-icon">◎</div>
          <h3>Photography</h3>
          <p>Portraits, events, editorial. Film or digital. From intimate golden-hour sessions to full-day event coverage across Lisbon.</p>
          <div class="service-card-price">From €150</div>
          <div class="service-crew-dots">
            <span class="crew-dot marco" title="Marco">MO</span>
            <span class="crew-dot luna" title="Luna">LF</span>
          </div>
        </div>

        <div class="service-card" draggable="true" data-type="service" data-id="videography" data-name="Videography" data-price="250" data-crew="marco">
          <div class="service-card-photo">Video sample</div>
          <div class="service-card-icon">▶</div>
          <h3>Videography</h3>
          <p>Short films, brand promos, music videos. Cinematic storytelling with analog warmth. Shot on Super 8 or digital.</p>
          <div class="service-card-price">From €250</div>
          <div class="service-crew-dots">
            <span class="crew-dot marco" title="Marco">MO</span>
          </div>
        </div>

        <div class="service-card" draggable="true" data-type="service" data-id="printing3d" data-name="3D Print Consultation" data-price="50" data-crew="luna">
          <div class="service-card-photo">3D printing sample</div>
          <div class="service-card-icon">⬡</div>
          <h3>3D Accessories</h3>
          <p>Custom camera accessories — lens caps, tripod adapters, flash mounts. Consultation to design your perfect piece.</p>
          <div class="service-card-price">From €50</div>
          <div class="service-crew-dots">
            <span class="crew-dot luna" title="Luna">LF</span>
          </div>
        </div>

      </div>
    </div>

    <!-- CREW -->
    <div class="panel reveal">
      <div class="panel-label">The Crew</div>
      <div class="crew-grid">

        <div class="crew-card" draggable="true" data-type="crew" data-id="marco" data-name="Marco Oliveira" data-services="photography,videography">
          <div class="crew-avatar marco">M</div>
          <div class="crew-info">
            <h3>Marco Oliveira</h3>
            <p>Street & documentary. Moody, cinematic, raw.</p>
            <div class="crew-services-tags">
              <span class="crew-tag">Photography</span>
              <span class="crew-tag">Video</span>
            </div>
          </div>
        </div>

        <div class="crew-card" draggable="true" data-type="crew" data-id="luna" data-name="Luna Ferreira" data-services="photography,printing3d">
          <div class="crew-avatar luna">L</div>
          <div class="crew-info">
            <h3>Luna Ferreira</h3>
            <p>Nature & light. Warm, nostalgic, golden.</p>
            <div class="crew-services-tags">
              <span class="crew-tag">Photography</span>
              <span class="crew-tag">3D Print</span>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- RIGHT: BOOKING ZONE -->
  <div class="booking-zone" id="bookingZone">
    <div class="bz-pull-bar" id="bzPull"></div>
    <div class="bz-title">Your Session</div>
    <div class="bz-sub">Drag services or crew here to build your booking</div>

    <!-- Selected service -->
    <div class="bz-section">
      <div class="bz-label">Service</div>
      <div id="bzService">
        <div class="bz-empty">Drop a service here</div>
      </div>
    </div>

    <!-- Selected crew -->
    <div class="bz-section">
      <div class="bz-label">Crew</div>
      <div id="bzCrew">
        <div class="bz-empty">Drop crew members here</div>
      </div>
    </div>

    <!-- Date -->
    <div class="bz-section">
      <div class="bz-label">Date</div>
      <div class="date-row" id="dateRow"></div>
    </div>

    <!-- Time slots -->
    <div class="bz-section">
      <div class="bz-label">Available Times</div>
      <div class="time-slots" id="timeSlots">
        <div class="bz-empty" style="grid-column:1/-1;">Select a service and date first</div>
      </div>
      <div class="legend">
        <div class="legend-item"><span class="legend-dot green"></span> All crew available</div>
        <div class="legend-item"><span class="legend-dot yellow"></span> Partial availability</div>
        <div class="legend-item"><span class="legend-dot grey"></span> Unavailable</div>
      </div>
    </div>

    <!-- Summary -->
    <div class="bz-summary" id="bzSummary" style="display:none;">
      <div class="bz-total">
        <span>Estimated total</span>
        <span class="price" id="bzTotalPrice">€0</span>
      </div>
      <button class="btn-book" id="btnBook" disabled>Select a time to continue</button>
    </div>
  </div>

</div>

<!-- GALLERY -->
<section class="gallery-section">
  <div class="panel-label reveal">Our Work</div>
  <div class="gallery-masonry">
    <div class="gallery-photo reveal">
      <div class="gallery-photo-img tall">Photography — Alfama</div>
      <span class="gallery-tag">Photography</span>
    </div>
    <div class="gallery-photo reveal">
      <div class="gallery-photo-img wide">Video — Promo</div>
      <span class="gallery-tag">Video</span>
    </div>
    <div class="gallery-photo reveal">
      <div class="gallery-photo-img square">3D Print — Lens Cap</div>
      <span class="gallery-tag">3D Print</span>
    </div>
    <div class="gallery-photo reveal">
      <div class="gallery-photo-img wide">Photography — Cascais</div>
      <span class="gallery-tag">Photography</span>
    </div>
    <div class="gallery-photo reveal">
      <div class="gallery-photo-img tall">Video — Short Film</div>
      <span class="gallery-tag">Video</span>
    </div>
    <div class="gallery-photo reveal">
      <div class="gallery-photo-img square">Photography — Event</div>
      <span class="gallery-tag">Photography</span>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <span>© 2026 Colectivo — Lisbon, Portugal</span>
  <ul class="footer-links">
    <li><a href="privacy.html">Privacy</a></li>
    <li><a href="about.html">About</a></li>
  </ul>
</footer>

<script>
// NAV
const burger = document.querySelector('.nav-burger');
const mobileMenu = document.querySelector('.mobile-menu');
burger.addEventListener('click', () => {
  burger.classList.toggle('active');
  mobileMenu.classList.toggle('active');
  document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';
});
mobileMenu.querySelectorAll('a').forEach(a => a.addEventListener('click', () => {
  burger.classList.remove('active');
  mobileMenu.classList.remove('active');
  document.body.style.overflow = '';
}));

// Reveal
const obs = new IntersectionObserver(entries => {
  entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
}, { threshold: 0.1 });
document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

// Mobile booking zone pull
const bzPull = document.getElementById('bzPull');
const bookingZone = document.getElementById('bookingZone');
if (bzPull) {
  bzPull.addEventListener('click', () => bookingZone.classList.toggle('expanded'));
}

// ======= BOOKING SYSTEM =======
const state = {
  service: null,
  crew: [],
  date: null,
  time: null
};

// Mock availability data (per crew member per date)
const availability = {
  marco: {
    0: ['09:00','10:00','11:00','14:00','15:00','16:00'],
    1: ['10:00','11:00','14:00','15:00'],
    2: ['09:00','10:00','11:00','14:00','15:00','16:00','17:00'],
    3: [],
    4: ['09:00','10:00','14:00','15:00','16:00'],
    5: ['10:00','11:00'],
    6: []
  },
  luna: {
    0: ['10:00','11:00','14:00','15:00','16:00','17:00'],
    1: ['09:00','10:00','11:00'],
    2: ['14:00','15:00','16:00','17:00'],
    3: ['09:00','10:00','11:00','14:00','15:00'],
    4: [],
    5: ['09:00','10:00','11:00','14:00','15:00','16:00'],
    6: ['10:00','11:00']
  }
};

const allTimeSlots = ['09:00','10:00','11:00','12:00','14:00','15:00','16:00','17:00'];

const serviceData = {
  photography: { name: 'Photography Session', price: 150, crew: ['marco','luna'] },
  videography: { name: 'Videography', price: 250, crew: ['marco'] },
  printing3d: { name: '3D Print Consultation', price: 50, crew: ['luna'] }
};

// Generate dates
const dateRow = document.getElementById('dateRow');
const today = new Date();
for (let i = 0; i < 14; i++) {
  const d = new Date(today);
  d.setDate(today.getDate() + i);
  const chip = document.createElement('div');
  chip.className = 'date-chip';
  chip.dataset.dayIndex = d.getDay();
  chip.dataset.dateOffset = i;
  chip.innerHTML = `<div class="date-chip-day">${d.getDate()}</div><div class="date-chip-label">${d.toLocaleDateString('en',{weekday:'short'})}</div>`;
  chip.addEventListener('click', () => selectDate(chip, d.getDay(), i));
  dateRow.appendChild(chip);
}

function selectDate(chip, dayIndex, offset) {
  document.querySelectorAll('.date-chip').forEach(c => c.classList.remove('selected'));
  chip.classList.add('selected');
  state.date = { dayIndex, offset };
  state.time = null;
  renderTimeSlots();
  updateSummary();
}

// Render time slots
function renderTimeSlots() {
  const container = document.getElementById('timeSlots');
  if (!state.date || (!state.service && state.crew.length === 0)) {
    container.innerHTML = '<div class="bz-empty" style="grid-column:1/-1;">Select a service and date first</div>';
    return;
  }

  const relevantCrew = state.crew.length > 0 ? state.crew :
    (state.service ? serviceData[state.service].crew : []);

  container.innerHTML = allTimeSlots.map(time => {
    const crewAvail = relevantCrew.map(c => {
      const avail = availability[c][state.date.dayIndex] || [];
      return { id: c, available: avail.includes(time) };
    });

    const allAvail = crewAvail.every(c => c.available);
    const someAvail = crewAvail.some(c => c.available);
    const statusClass = allAvail ? 'available' : (someAvail ? 'partial' : 'unavailable');

    const dots = crewAvail.map(c =>
      `<span class="mini-dot ${c.id}-dot" style="opacity:${c.available ? 1 : 0.2}"></span>`
    ).join('');

    return `<div class="time-slot ${statusClass}" data-time="${time}" ${statusClass === 'unavailable' ? '' : `onclick="selectTime(this, '${time}')"`}>
      ${time}
      <div class="time-slot-crew">${dots}</div>
    </div>`;
  }).join('');
}

function selectTime(el, time) {
  document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
  el.classList.add('selected');
  state.time = time;
  updateSummary();
}

// Handle service drops
function setService(id) {
  state.service = id;
  const svc = serviceData[id];

  document.querySelectorAll('.service-card').forEach(c => {
    c.classList.toggle('selected', c.dataset.id === id);
  });

  document.getElementById('bzService').innerHTML = `
    <div class="bz-item">
      <span>${svc.name} — €${svc.price}</span>
      <button class="bz-item-remove" onclick="clearService()">✕</button>
    </div>`;

  // Highlight relevant crew
  highlightCrew(svc.crew);

  // Auto-add all crew for this service if none selected
  if (state.crew.length === 0) {
    svc.crew.forEach(c => {
      if (!state.crew.includes(c)) state.crew.push(c);
    });
    renderCrew();
  }

  renderTimeSlots();
  updateSummary();

  // Expand mobile zone
  bookingZone.classList.add('expanded');
}

function clearService() {
  state.service = null;
  document.querySelectorAll('.service-card').forEach(c => c.classList.remove('selected'));
  document.getElementById('bzService').innerHTML = '<div class="bz-empty">Drop a service here</div>';
  highlightCrew([]);
  renderTimeSlots();
  updateSummary();
}

function addCrew(id) {
  if (state.crew.includes(id)) return;
  state.crew.push(id);

  document.querySelectorAll('.crew-card').forEach(c => {
    c.classList.toggle('selected', state.crew.includes(c.dataset.id));
  });

  renderCrew();
  renderTimeSlots();
  updateSummary();
  bookingZone.classList.add('expanded');
}

function removeCrew(id) {
  state.crew = state.crew.filter(c => c !== id);
  document.querySelectorAll('.crew-card').forEach(c => {
    c.classList.toggle('selected', state.crew.includes(c.dataset.id));
  });
  renderCrew();
  renderTimeSlots();
  updateSummary();
}

function renderCrew() {
  const container = document.getElementById('bzCrew');
  if (state.crew.length === 0) {
    container.innerHTML = '<div class="bz-empty">Drop crew members here</div>';
    return;
  }
  const names = { marco: 'Marco Oliveira', luna: 'Luna Ferreira' };
  container.innerHTML = state.crew.map(c => `
    <div class="bz-item">
      <span>${names[c]}</span>
      <button class="bz-item-remove" onclick="removeCrew('${c}')">✕</button>
    </div>
  `).join('');
}

function highlightCrew(crewIds) {
  document.querySelectorAll('.crew-card').forEach(c => {
    c.classList.remove('highlight-marco', 'highlight-luna');
    if (crewIds.includes(c.dataset.id)) {
      c.classList.add('highlight-' + c.dataset.id);
    }
  });

  document.querySelectorAll('.crew-dot').forEach(dot => {
    dot.classList.remove('highlight');
  });

  document.querySelectorAll('.service-card').forEach(card => {
    if (state.service && card.dataset.id === state.service) {
      card.querySelectorAll('.crew-dot').forEach(dot => dot.classList.add('highlight'));
    }
  });
}

function updateSummary() {
  const summary = document.getElementById('bzSummary');
  const btn = document.getElementById('btnBook');
  const priceEl = document.getElementById('bzTotalPrice');

  if (state.service || state.crew.length > 0) {
    summary.style.display = 'block';
    const basePrice = state.service ? serviceData[state.service].price : 0;
    const crewExtra = state.crew.length > 1 ? (state.crew.length - 1) * 50 : 0;
    priceEl.textContent = '€' + (basePrice + crewExtra);

    if (state.time && state.date) {
      btn.disabled = false;
      btn.textContent = 'Request booking →';
    } else {
      btn.disabled = true;
      btn.textContent = state.date ? 'Select a time to continue' : 'Select a date to continue';
    }
  } else {
    summary.style.display = 'none';
  }
}

// ===== DRAG & DROP =====
// Desktop
document.querySelectorAll('.service-card, .crew-card').forEach(card => {
  card.addEventListener('dragstart', e => {
    card.classList.add('dragging');
    e.dataTransfer.setData('text/plain', JSON.stringify({
      type: card.dataset.type,
      id: card.dataset.id,
      name: card.dataset.name
    }));
  });
  card.addEventListener('dragend', () => card.classList.remove('dragging'));

  // Click fallback
  card.addEventListener('click', () => {
    if (card.dataset.type === 'service') setService(card.dataset.id);
    else if (card.dataset.type === 'crew') addCrew(card.dataset.id);
  });
});

bookingZone.addEventListener('dragover', e => {
  e.preventDefault();
  bookingZone.classList.add('drag-over');
});
bookingZone.addEventListener('dragleave', (e) => {
  if (!bookingZone.contains(e.relatedTarget)) bookingZone.classList.remove('drag-over');
});
bookingZone.addEventListener('drop', e => {
  e.preventDefault();
  bookingZone.classList.remove('drag-over');
  try {
    const d = JSON.parse(e.dataTransfer.getData('text/plain'));
    if (d.type === 'service') setService(d.id);
    else if (d.type === 'crew') addCrew(d.id);
  } catch(err) {}
});

// Touch drag
let touchData = null, touchGhost = null;
document.querySelectorAll('.service-card, .crew-card').forEach(card => {
  card.addEventListener('touchstart', e => {
    const t = e.touches[0];
    touchData = { type: card.dataset.type, id: card.dataset.id, name: card.dataset.name, sx: t.clientX, sy: t.clientY, dragging: false, card };
  }, { passive: true });

  card.addEventListener('touchmove', e => {
    if (!touchData) return;
    const t = e.touches[0];
    if (!touchData.dragging && (Math.abs(t.clientX - touchData.sx) > 10 || Math.abs(t.clientY - touchData.sy) > 10)) {
      touchData.dragging = true;
      touchData.card.classList.add('dragging');
      touchGhost = document.createElement('div');
      touchGhost.className = 'touch-ghost';
      touchGhost.textContent = touchData.name || touchData.id;
      document.body.appendChild(touchGhost);
    }
    if (touchData.dragging) {
      e.preventDefault();
      touchGhost.style.left = t.clientX / 16 + 'rem';
      touchGhost.style.top = (t.clientY / 16 - 2) + 'rem';
      const r = bookingZone.getBoundingClientRect();
      bookingZone.classList.toggle('drag-over', t.clientX >= r.left && t.clientX <= r.right && t.clientY >= r.top && t.clientY <= r.bottom);
    }
  }, { passive: false });

  card.addEventListener('touchend', e => {
    if (!touchData) return;
    touchData.card.classList.remove('dragging');
    if (touchData.dragging) {
      const t = e.changedTouches[0];
      const r = bookingZone.getBoundingClientRect();
      if (t.clientX >= r.left && t.clientX <= r.right && t.clientY >= r.top && t.clientY <= r.bottom) {
        if (touchData.type === 'service') setService(touchData.id);
        else if (touchData.type === 'crew') addCrew(touchData.id);
      }
      bookingZone.classList.remove('drag-over');
      if (touchGhost) { touchGhost.remove(); touchGhost = null; }
    }
    touchData = null;
  });
});

// Service card hover → highlight crew
document.querySelectorAll('.service-card').forEach(card => {
  card.addEventListener('mouseenter', () => {
    const crewList = card.dataset.crew ? card.dataset.crew.split(',') : [];
    document.querySelectorAll('.crew-card').forEach(c => {
      if (crewList.includes(c.dataset.id)) c.classList.add('highlight-' + c.dataset.id);
    });
  });
  card.addEventListener('mouseleave', () => {
    document.querySelectorAll('.crew-card').forEach(c => {
      c.classList.remove('highlight-marco', 'highlight-luna');
    });
    // Re-apply if service is selected
    if (state.service) highlightCrew(serviceData[state.service].crew);
  });
});

// Book button
document.getElementById('btnBook').addEventListener('click', () => {
  const svc = state.service ? serviceData[state.service].name : 'No service selected';
  const crew = state.crew.map(c => c === 'marco' ? 'Marco Oliveira' : 'Luna Ferreira').join(', ') || 'None';
  const dateChip = document.querySelector('.date-chip.selected');
  const dateText = dateChip ? dateChip.textContent.trim() : 'No date';

  alert(`Booking Request:\n\nService: ${svc}\nCrew: ${crew}\nDate: ${dateText}\nTime: ${state.time}\n\n→ This would submit to Formspree/Web3Forms and send you a confirmation email.`);
});
</script>

</body>
</html>
